# Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

**æ–¹æ¡ˆä¸€ï¼šCloudflare Pages + å…è´¹åŸŸåï¼ˆäºŒçº§åŸŸåï¼‰**

- âœ… **å®Œå…¨å…è´¹**ï¼šCloudflare Pages å…è´¹å¥—é¤è¶³å¤Ÿä¸ªäººç½‘ç«™ä½¿ç”¨
- âœ… **å›½å†…å¯è®¿é—®**ï¼šCloudflare å…¨çƒ CDNï¼Œå›½å†…å¯ç›´è¿
- âœ… **ä¸æŠ˜è…¾**ï¼šé…ç½®ç®€å•ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²
- âœ… **é€Ÿåº¦å¿«**ï¼šå…¨çƒ CDN åŠ é€Ÿï¼Œè®¿é—®é€Ÿåº¦å¿«

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä»£ç ä»“åº“

1. **åˆå§‹åŒ– Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. **æ¨é€åˆ° GitHub/GitLab**
   - åœ¨ GitHub åˆ›å»ºæ–°ä»“åº“ï¼ˆä¾‹å¦‚ï¼š`my-site`ï¼‰
   - æ¨é€ä»£ç ï¼š
     ```bash
     git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/my-site.git
     git branch -M main
     git push -u origin main
     ```

### ç¬¬äºŒæ­¥ï¼šé…ç½® Cloudflare Pages

1. **ç™»å½• Cloudflare**
   - è®¿é—®ï¼šhttps://dash.cloudflare.com/
   - å¦‚æœæ²¡æœ‰è´¦å·ï¼Œå…è´¹æ³¨å†Œï¼ˆæ— éœ€ä¿¡ç”¨å¡ï¼‰

2. **åˆ›å»º Pages é¡¹ç›®**
   - è¿›å…¥ **Workers & Pages** â†’ **Create application** â†’ **Pages** â†’ **Connect to Git**
   - é€‰æ‹©ä½ çš„ Git æä¾›å•†ï¼ˆGitHub/GitLabï¼‰
   - æˆæƒ Cloudflare è®¿é—®ä½ çš„ä»“åº“
   - é€‰æ‹©ä»“åº“ï¼š`my-site`

3. **é…ç½®æ„å»ºè®¾ç½®**
   - **é¡¹ç›®åç§°**ï¼š`my-site`ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰
   - **ç”Ÿäº§åˆ†æ”¯**ï¼š`main`
   - **æ„å»ºå‘½ä»¤**ï¼š`npm run build`
   - **æ„å»ºè¾“å‡ºç›®å½•**ï¼š`out`ï¼ˆNext.js é™æ€å¯¼å‡ºåçš„ç›®å½•ï¼‰
   - **æ ¹ç›®å½•**ï¼š`/`ï¼ˆä¿æŒé»˜è®¤ï¼‰

4. **ç¯å¢ƒå˜é‡**ï¼ˆå¯é€‰ï¼‰
   - å¦‚æœéœ€è¦ç¯å¢ƒå˜é‡ï¼Œåœ¨ **Settings** â†’ **Environment variables** ä¸­æ·»åŠ 

5. **ç‚¹å‡» Save and Deploy**

### ç¬¬ä¸‰æ­¥ï¼šè·å–å…è´¹åŸŸå

éƒ¨ç½²å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå…è´¹çš„ Cloudflare Pages åŸŸåï¼š
- æ ¼å¼ï¼š`https://my-site.pages.dev`
- è¿™ä¸ªåŸŸåå›½å†…å¯ä»¥ç›´æ¥è®¿é—® âœ…

### ç¬¬å››æ­¥ï¼šè‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼š

1. **åœ¨ Cloudflare æ·»åŠ åŸŸå**
   - è¿›å…¥ **Websites** â†’ **Add a site**
   - è¾“å…¥ä½ çš„åŸŸåï¼ˆä¾‹å¦‚ï¼š`example.com`ï¼‰
   - æŒ‰ç…§æç¤ºå®Œæˆ DNS é…ç½®

2. **ç»‘å®šåˆ° Pages**
   - è¿›å…¥ä½ çš„ Pages é¡¹ç›® â†’ **Custom domains**
   - ç‚¹å‡» **Set up a custom domain**
   - è¾“å…¥ä½ çš„åŸŸå
   - Cloudflare ä¼šè‡ªåŠ¨é…ç½® DNS

3. **å…è´¹åŸŸåæ¨è**
   - **Freenom**ï¼šæä¾›å…è´¹ `.tk`, `.ml`, `.ga`, `.cf` ç­‰åŸŸå
   - **GitHub Student Pack**ï¼šå­¦ç”Ÿå¯ç”³è¯·å…è´¹åŸŸå
   - **å…¶ä»–å…è´¹åŸŸåæœåŠ¡**

## ğŸ”§ æœ¬åœ°æµ‹è¯•

åœ¨éƒ¨ç½²å‰ï¼Œå¯ä»¥å…ˆæœ¬åœ°æµ‹è¯•æ„å»ºï¼š

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé™æ€æ–‡ä»¶
npm run build

# æŸ¥çœ‹æ„å»ºè¾“å‡º
ls -la out/
```

## ğŸ“ é‡è¦è¯´æ˜

### é™æ€å¯¼å‡ºé™åˆ¶

ç”±äºä½¿ç”¨äº† `output: 'export'`ï¼Œä»¥ä¸‹åŠŸèƒ½ä¸å¯ç”¨ï¼š
- âŒ Next.js Image ç»„ä»¶çš„å›¾ç‰‡ä¼˜åŒ–ï¼ˆå·²é…ç½® `unoptimized: true`ï¼‰
- âŒ API Routesï¼ˆ`/api` è·¯ç”±ï¼‰
- âŒ Server Components çš„åŠ¨æ€åŠŸèƒ½
- âŒ `getServerSideProps` å’Œ `getStaticProps`ï¼ˆä½¿ç”¨ `getStaticProps` æ—¶éœ€ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½æ˜¯é™æ€çš„ï¼‰

### å¦‚æœéœ€è¦åŠ¨æ€åŠŸèƒ½

å¦‚æœåç»­éœ€è¦ API æˆ–æœåŠ¡ç«¯åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ï¼š
- **Cloudflare Workers**ï¼šå…è´¹å¥—é¤ 100,000 è¯·æ±‚/å¤©
- **Cloudflare Functions**ï¼šåœ¨ Pages é¡¹ç›®ä¸­åˆ›å»º `/functions` ç›®å½•

## ğŸŒ å›½å†…è®¿é—®ä¼˜åŒ–

Cloudflare çš„ CDN åœ¨å›½å†…å¯ä»¥è®¿é—®ï¼Œä½†ä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼š

1. **ä½¿ç”¨ Cloudflare çš„å…è´¹ SSL è¯ä¹¦**ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰
2. **å¯ç”¨ Cloudflare çš„ç¼“å­˜ä¼˜åŒ–**
   - è¿›å…¥ Pages é¡¹ç›® â†’ **Settings** â†’ **Builds & deployments**
   - é…ç½®ç¼“å­˜ç­–ç•¥

3. **å¯é€‰ï¼šä½¿ç”¨å›½å†… CDN åŠ é€Ÿ**
   - å¦‚æœè®¿é—®é€Ÿåº¦ä¸ç†æƒ³ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å›½å†… CDN æœåŠ¡

## ğŸ”„ è‡ªåŠ¨éƒ¨ç½²

é…ç½®å®Œæˆåï¼Œæ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯ï¼ŒCloudflare Pages ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹ä»£ç å˜æ›´
2. è¿è¡Œæ„å»ºå‘½ä»¤
3. éƒ¨ç½²æ–°ç‰ˆæœ¬
4. æ›´æ–°ç½‘ç«™å†…å®¹

## ğŸ“Š ç›‘æ§å’Œåˆ†æ

- **Cloudflare Analytics**ï¼šåœ¨ Pages é¡¹ç›®ä¸­æŸ¥çœ‹è®¿é—®ç»Ÿè®¡
- **Web Analytics**ï¼šå…è´¹çš„åˆ†æå·¥å…·

## ğŸ†˜ å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥
- æ£€æŸ¥æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®ï¼š`npm run build`
- æ£€æŸ¥æ„å»ºè¾“å‡ºç›®å½•ï¼š`out`
- æŸ¥çœ‹æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### 2. é¡µé¢ 404
- ç¡®ä¿ `public/_redirects` æ–‡ä»¶å­˜åœ¨
- æ£€æŸ¥è·¯ç”±é…ç½®æ˜¯å¦æ­£ç¡®

### 3. å›¾ç‰‡ä¸æ˜¾ç¤º
- ç¡®ä¿å›¾ç‰‡æ”¾åœ¨ `public` ç›®å½•
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š`/image.png` è€Œä¸æ˜¯ `./image.png`

## ğŸ‰ å®Œæˆï¼

éƒ¨ç½²æˆåŠŸåï¼Œä½ çš„ç½‘ç«™å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **Cloudflare Pages åŸŸå**ï¼š`https://my-site.pages.dev`
- **è‡ªå®šä¹‰åŸŸå**ï¼ˆå¦‚æœé…ç½®ï¼‰ï¼š`https://yourdomain.com`

---

**æç¤º**ï¼šè¿™ä¸ªæ–¹æ¡ˆå®Œå…¨å…è´¹ï¼Œé€‚åˆä¸ªäººåšå®¢ã€ä½œå“é›†ç­‰é™æ€ç½‘ç«™ã€‚å¦‚æœéœ€è¦æ›´å¤šåŠŸèƒ½ï¼Œå¯ä»¥éšæ—¶å‡çº§åˆ°ä»˜è´¹æ–¹æ¡ˆæˆ–æ·»åŠ  Cloudflare Workersã€‚

